{
  "swagger": "2.0",
  "info": 
  {
    "title": "Api BLI M2X",
    "description": "API d'acces a M2X",
    "version": "0.9",
    "contact": 
    {
      "email": "jean-pierre.cheney@laposte.fr"
    },

    "license": 
    {
      "name": "La Poste/Privée",
      "url": "http://nowhere.org"
    }
  },
  "schemes": 
  [
    "http"
  ],

  "basePath": "/",
  "tags": 
  [
    {
      "name": "postMessage",
      "description": "Web service de postage de message"
    }
	,
    {
      "name": "getAllMessages",
      "description": "Web service de recuperation de tous les messages"
    }
	,
	{
      "name": "insertCle",
      "description": "Web service de creation de couple cle, libelle pour les infos a stocker de chaque rfid"
    }
	,
	{
      "name": "insertRfid",
      "description": "Web service creation de rfid"
    }
	,
	{
      "name": "afficheCles",
      "description": "Web service de recuperation des couples cle, libelle pour les infos a stocker de chaque rfid"
    }
	,
	{
      "name": "afficheClesByRfid",
      "description": "Web service de recuperation des informations postees pour un rfid"
    }
	
  ],

  "paths": 
  {
    "/ws/postMessage.php": 
    {
      "post": 
      {
        "tags": 
        [
          "postMessage"
        ],

        "summary": "Envoi de message",
        "description": "Web service d'envoi de message. Les données sont alors stockés sur ATT M2X.",
        "produces": 
        [
          "application/json"
        ],

        "deprecated": false,
        "parameters": 
        [
          {
            "name": "apiKey",
            "in": "formData",
            "description": "La clé api d'acces à M2X.",
            "required": true,
            "type": "string",
            "default": "0cf6abec0e9ea8f4bd8f2d267bb2eacf"
          },
		  {
            "name": "deviceId",
            "in": "formData",
            "description": "L'id du device.",
            "required": true,
            "type": "string",
            "default": "07966069e262d4bd198568352c3a4318"
          },
		  {
            "name": "streamId",
            "in": "formData",
            "description": "L'id du stream du device M2X. (on peut passer plusieurs streams, séparés par un ';')",
            "required": true,
            "type": "string",
            "default": ""
          },
		  {
            "name": "valeur",
            "in": "formData",
            "description": "La valeur à passer.(on peut passer plusieurs valeurs, séparées par un ';'. Evidemment, le nombre de valeurs doit etre egale au nombre de streams...)",
            "required": true,
            "type": "string",
            "default": ""
          }
        ],
        "responses": 
        {
          "200": 
          {
            "description": "Resultat...",
            "schema": 
            {
				"type": "object",
				"properties": {
					"code": {
						"type": "string"
					},
					"libelle": {
						"type": "string"
					},
					"valeurs": {
						"type": "array",
						"items" :{
							"type" : "object",
							"properties": {
								"apiKey": {
									"type" : "string"
								},
								"deviceId": {
									"type" : "string"
								},
								"streamId": {
									"type" : "string"
								},
								"valeur": {
									"type" : "string"
								}
							}
						}
					}
				}
            }
          }
        }
      }
    }
	,
  
    "/ws/getAllMessages.php": 
    {
      "get": 
      {
        "tags": 
        [
          "getAllMessages"
        ],

        "summary": "Recuperation de tous les messages",
        "description": "Web service de recuperation de tous les messages stockés sur ATT M2X pour le device et le stream donné.",
        "produces": 
        [
          "application/json"
        ],

        "deprecated": false,
        "parameters": 
        [
          {
            "name": "apiKey",
            "in": "query",
            "description": "Le clé api d'acces à M2X.",
            "required": true,
            "type": "string",
            "default": "0cf6abec0e9ea8f4bd8f2d267bb2eacf"
          },
		  {
            "name": "deviceId",
            "in": "query",
            "description": "L'id du device.",
            "required": true,
            "type": "string",
            "default": "07966069e262d4bd198568352c3a4318"
          },
		  {
            "name": "streamId",
            "in": "query",
            "description": "L'id du stream du device M2X.",
            "required": true,
            "type": "string",
            "default": ""
          }
        ],
        "responses": 
        {
          "200": 
          {
            "description": "Resultat...",
            "schema": 
            {
				"type": "object",
				"properties": {
					"code": {
						"type": "string"
					},
					"libelle": {
						"type": "string"
					},
					"values": {
						"type": "object",
						"properties": {
							"value":{
								"type": "array",
								"items" :{
									"type" : "object",
									"properties": {
										"timestamp": {
											"type" : "string"
										},
										"valeur": {
											"type" : "string"
										}
									}
								}
							}
						}
						
					}
				}
            }
          }
        }
      }
    }
	,
	"/rfid/ws/insertCle.php": 
    {
      "post": 
      {
        "tags": 
        [
          "insertCle"
        ],

        "summary": "Envoi de couple cle - libelle",
        "description": "Web service de couple cle - libelle, par exemple cle=NOM_PRODUIT et libelle=Nom du produit",
        "produces": 
        [
          "application/json"
        ],

        "deprecated": false,
        "parameters": 
        [
          {
            "name": "cle",
            "in": "formData",
            "description": "La clé de la ligne de parametrage",
            "required": true,
            "type": "string",
            "default": ""
          },
		  {
            "name": "libelle",
            "in": "formData",
            "description": "Le libelle de la ligne de parametrage",
            "required": true,
            "type": "string",
            "default": ""
          }
        ],
        "responses": 
        {
          "200": 
          {
            "description": "Resultat...",
            "schema": 
            {
				"type": "object",
				"properties": {
					"code": {
						"type": "string"
					},
					"libelle": {
						"type": "string"
					}
				}
            }
          }
        }
      }
    }
	,
	"/rfid/ws/insertRfid.php": 
    {
      "post": 
      {
        "tags": 
        [
          "insertRfid"
        ],

        "summary": "Envoi de rfid avec des couple cle,valeur pour chaque parametre a stocker",
        "description": "Web service de creation de rfid",
        "produces": 
        [
          "application/json"
        ],

        "deprecated": false,
        "parameters": 
        [
          {
            "name": "id",
            "in": "formData",
            "description": "L'id du rfid",
            "required": true,
            "type": "string",
            "default": ""
          },
		  {
            "name": "nom_interne",
            "in": "formData",
            "description": "Un nom interne, a voir pour quoi l'utiliser...",
            "required": true,
            "type": "string",
            "default": ""
          },
		  {
            "name": "cles_params",
            "in": "formData",
            "description": "Les cles de parametrage a stocker (vide si pas de parametrage), separees par un ;",
            "required": true,
            "type": "string",
            "default": ""
          },
		  {
            "name": "valeurs",
            "in": "formData",
            "description": "Les valeurs de parametrage a stocker (vide si pas de parametrage), separees par un ;",
            "required": true,
            "type": "string",
            "default": ""
          }
        ],
        "responses": 
        {
          "200": 
          {
            "description": "Resultat...",
            "schema": 
            {
				"type": "object",
				"properties": {
					"code": {
						"type": "string"
					},
					"libelle": {
						"type": "string"
					}
				}
            }
          }
        }
      }
    }
	,
	
	"/rfid/ws/afficheCles.php": 
    {
      "get": 
      {
        "tags": 
        [
          "afficheCles"
        ],

        "summary": "Recuperation de tous couples cle, libelle de parametrage",
        "description": "Web service de recuperation de tous les couples de parametrage.",
        "produces": 
        [
          "application/json"
        ],

        "deprecated": false,
        "parameters": 
        [
          
        ],
        "responses": 
        {
          "200": 
          {
            "description": "Resultat...",
            "schema": 
            {
				"type": "object",
				"properties": {
					"code": {
						"type": "string"
					},
					"libelle": {
						"type": "string"
					},
					"values": {
						
						"type": "array",
						"items" :{
							"type" : "object",
							"properties": {
								"cle": {
									"type" : "string"
								},
								"libelle": {
									"type" : "string"
								}
							}
						}
					}
				}
            }
          }
        }
      }
    }
	,
	"/ws/getAllMessages.php": 
    {
      "get": 
      {
        "tags": 
        [
          "afficheClesById"
        ],

        "summary": "Recuperation des informations postees pour un rfid",
        "description": "Web service de recuperation des informations d'un rfid : nom_interne et tous les couples cle, libelle, valeur.",
        "produces": 
        [
          "application/json"
        ],

        "deprecated": false,
        "parameters": 
        [
          {
            "name": "id",
            "in": "query",
            "description": "L'id du rfid.",
            "required": true,
            "type": "string",
            "default": ""
          }
        ],
        "responses": 
        {
          "200": 
          {
            "description": "Resultat...",
            "schema": 
            {
				"type": "object",
				"properties": {
					"code": {
						"type": "string"
					},
					"libelle": {
						"type": "string"
					},
					"rfid": {
						"type": "object",
						"properties": {
							"id" :{
								"type" : "string"
							},
							"nom_interne" :{
								"type" : "string"
							},
							"fields":{
								"type": "array",
								"items" :{
									"type" : "object",
									"properties": {
										"cle_params": {
											"type" : "string"
										},
										"libelle_params": {
											"type" : "string"
										},
										"valeur": {
											"type" : "string"
										}
									}
								}
							}
						}
						
					}
				}
            }
          }
        }
      }
    }
	
	
	
  }

}